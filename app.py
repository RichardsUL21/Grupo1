import streamlit as st
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go
from datetime import datetime

# Configuraci√≥n de la p√°gina
st.set_page_config(
    page_title="SO Libre y Privativo: Historia y Ejemplos",
    page_icon="üíª",
    layout="wide",
    initial_sidebar_state="expanded"
)

# CSS personalizado
st.markdown("""
<style>
    .main-header {
        font-size: 3rem;
        color: #1f77b4;
        text-align: center;
        margin-bottom: 2rem;
    }
    .sub-header {
        font-size: 1.5rem;
        color: #333;
        margin-bottom: 1rem;
    }
    .info-box {
        background-color: #f0f2f6;
        padding: 1.5rem;
        border-radius: 10px;
        margin-bottom: 1rem;
    }
    .metric-card {
        background-color: #ffffff;
        padding: 1rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
</style>
""", unsafe_allow_html=True)

# T√≠tulo principal
st.markdown("<h1 class='main-header'>üñ•Ô∏è Sistemas Operativos: Libre vs Privativo</h1>", unsafe_allow_html=True)

# Sidebar
with st.sidebar:
    st.image("https://upload.wikimedia.org/wikipedia/commons/thumb/3/35/Tux.svg/150px-Tux.svg.png", width=150)
    st.title("üìö Navegaci√≥n")
    
    seccion = st.radio(
        "Selecciona una secci√≥n:",
        ["üè† Inicio", "üìñ Historia", "üîç Comparaci√≥n", "üí° Ejemplos", "üìä Estad√≠sticas", "üéØ Quiz Interactivo"]
    )
    
    st.markdown("---")
    st.info("**Grupo #1**\nHistoria y Ejemplos de SO")
    st.markdown("---")
    st.caption(f"√öltima actualizaci√≥n: {datetime.now().strftime('%d/%m/%Y')}")

# Contenido principal basado en la selecci√≥n
if seccion == "üè† Inicio":
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown("<div class='info-box'>", unsafe_allow_html=True)
        st.markdown("### üîì Software Libre")
        st.write("""
        El software libre es aquel que respeta la libertad de los usuarios sobre su producto adquirido y, 
        por tanto, una vez obtenido puede ser usado, copiado, estudiado, modificado y redistribuido libremente.
        """)
        st.markdown("</div>", unsafe_allow_html=True)
        
    with col2:
        st.markdown("<div class='info-box'>", unsafe_allow_html=True)
        st.markdown("### üîí Software Privativo")
        st.write("""
        El software privativo es aquel que no permite su libre acceso al c√≥digo fuente, limitando las 
        posibilidades de modificaci√≥n y redistribuci√≥n por parte de los usuarios.
        """)
        st.markdown("</div>", unsafe_allow_html=True)
    
    st.markdown("---")
    
    # M√©tricas principales
    col1, col2, col3, col4 = st.columns(4)
    
    with col1:
        st.metric("SO Libres Populares", "15+", "‚Üë 3 nuevos")
    with col2:
        st.metric("SO Privativos", "5", "‚Üí Estable")
    with col3:
        st.metric("Usuarios Linux", "2.8%", "‚Üë 0.3%")
    with col4:
        st.metric("Usuarios Windows", "73%", "‚Üì 1.2%")

elif seccion == "üìñ Historia":
    st.markdown("## üìú Historia de los Sistemas Operativos")
    
    # Timeline interactivo
    eventos = pd.DataFrame({
        'A√±o': [1969, 1983, 1985, 1991, 1993, 2001, 2004, 2008],
        'Evento': [
            'Creaci√≥n de UNIX',
            'Richard Stallman inicia GNU',
            'Microsoft lanza Windows 1.0',
            'Linus Torvalds crea Linux',
            'Lanzamiento de Debian',
            'Mac OS X (basado en Unix)',
            'Ubuntu primera versi√≥n',
            'Android (basado en Linux)'
        ],
        'Tipo': ['Privativo', 'Libre', 'Privativo', 'Libre', 'Libre', 'Privativo', 'Libre', 'Libre']
    })
    
    fig = px.timeline(
        eventos,
        x_start='A√±o',
        x_end='A√±o',
        y='Evento',
        color='Tipo',
        title="L√≠nea de Tiempo de Sistemas Operativos"
    )
    
    st.plotly_chart(fig, use_container_width=True)
    
    # Tabs con informaci√≥n hist√≥rica
    tab1, tab2 = st.tabs(["üîì Historia del Software Libre", "üîí Historia del Software Privativo"])
    
    with tab1:
        st.write("""
        ### El Movimiento del Software Libre
        
        **1983 - Proyecto GNU**: Richard Stallman inicia el proyecto GNU con el objetivo de crear un sistema operativo completamente libre.
        
        **1989 - GPL**: Se publica la primera versi√≥n de la Licencia P√∫blica General de GNU.
        
        **1991 - Linux**: Linus Torvalds libera el kernel Linux, completando el sistema GNU/Linux.
        
        **1998 - Open Source**: Se acu√±a el t√©rmino "Open Source" como alternativa comercial al "Software Libre".
        """)
        
    with tab2:
        st.write("""
        ### Evoluci√≥n del Software Privativo
        
        **1975 - Microsoft**: Bill Gates y Paul Allen fundan Microsoft.
        
        **1981 - MS-DOS**: Microsoft desarrolla MS-DOS para IBM PC.
        
        **1985 - Windows**: Lanzamiento de Windows 1.0.
        
        **2001 - Windows XP**: Uno de los SO privativos m√°s exitosos de la historia.
        """)

elif seccion == "üîç Comparaci√≥n":
    st.markdown("## ‚öñÔ∏è Comparaci√≥n Detallada")
    
    # Tabla comparativa
    comparacion = pd.DataFrame({
        'Caracter√≠stica': [
            'C√≥digo Fuente',
            'Costo de Licencia',
            'Personalizaci√≥n',
            'Soporte T√©cnico',
            'Seguridad',
            'Compatibilidad',
            'Curva de Aprendizaje'
        ],
        'Software Libre': [
            '‚úÖ Accesible',
            '‚úÖ Gratuito (mayor√≠a)',
            '‚úÖ Total',
            '‚ö†Ô∏è Comunidad',
            '‚úÖ Alta transparencia',
            '‚ö†Ô∏è Variable',
            'üìà Media-Alta'
        ],
        'Software Privativo': [
            '‚ùå Cerrado',
            'üí∞ Pago',
            '‚ùå Limitada',
            '‚úÖ Empresarial',
            '‚ö†Ô∏è Opaca',
            '‚úÖ Alta',
            'üìâ Baja'
        ]
    })
    
    st.dataframe(comparacion, use_container_width=True, height=300)
    
    # Gr√°fico de radar
    categorias = ['Libertad', 'Costo', 'Seguridad', 'Soporte', 'Personalizaci√≥n']
    
    fig = go.Figure()
    
    fig.add_trace(go.Scatterpolar(
        r=[5, 5, 4, 3, 5],
        theta=categorias,
        fill='toself',
        name='Software Libre'
    ))
    
    fig.add_trace(go.Scatterpolar(
        r=[1, 2, 3, 5, 2],
        theta=categorias,
        fill='toself',
        name='Software Privativo'
    ))
    
    fig.update_layout(
        polar=dict(
            radialaxis=dict(
                visible=True,
                range=[0, 5]
            )),
        showlegend=True,
        title="Comparaci√≥n por Categor√≠as"
    )
    
    st.plotly_chart(fig, use_container_width=True)

elif seccion == "üí° Ejemplos":
    st.markdown("## üñ•Ô∏è Ejemplos de Sistemas Operativos")
    
    tab1, tab2 = st.tabs(["üêß Sistemas Libres", "ü™ü Sistemas Privativos"])
    
    with tab1:
        col1, col2, col3 = st.columns(3)
        
        with col1:
            st.markdown("### Ubuntu")
            st.image("https://upload.wikimedia.org/wikipedia/commons/thumb/a/ab/Logo-ubuntu_cof-orange-hex.svg/120px-Logo-ubuntu_cof-orange-hex.svg.png", width=100)
            st.write("""
            - **Basado en**: Debian
            - **Interfaz**: GNOME
            - **Uso**: Desktop/Server
            - **Actualizaci√≥n**: Cada 6 meses
            """)
            
        with col2:
            st.markdown("### Fedora")
            st.image("https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Fedora_logo.svg/120px-Fedora_logo.svg.png", width=100)
            st.write("""
            - **Patrocinador**: Red Hat
            - **Interfaz**: GNOME
            - **Uso**: Desktop/Server
            - **Enfoque**: Innovaci√≥n
            """)
            
        with col3:
            st.markdown("### Debian")
            st.image("https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/Openlogo-debianV2.svg/120px-Openlogo-debianV2.svg.png", width=100)
            st.write("""
            - **Fundaci√≥n**: 1993
            - **Interfaz**: M√∫ltiples
            - **Uso**: Universal
            - **Estabilidad**: Muy alta
            """)
        
        st.markdown("---")
        
        # M√°s ejemplos
        with st.expander("Ver m√°s distribuciones libres"):
            st.write("""
            - **Arch Linux**: Para usuarios avanzados
            - **openSUSE**: Enfoque empresarial
            - **Mint**: Amigable para principiantes
            - **Elementary OS**: Dise√±o elegante
            - **Manjaro**: Basado en Arch, m√°s f√°cil
            - **CentOS**: Servidor empresarial
            - **Kali Linux**: Seguridad inform√°tica
            - **Zorin OS**: Similar a Windows
            """)
            
    with tab2:
        col1, col2 = st.columns(2)
        
        with col1:
            st.markdown("### Windows")
            st.write("""
            **Versiones actuales:**
            - Windows 11 (2021)
            - Windows 10 (2015)
            - Windows Server 2022
            
            **Caracter√≠sticas:**
            - Interfaz familiar
            - Gran compatibilidad
            - Soporte empresarial
            - Actualizaciones regulares
            """)
            
        with col2:
            st.markdown("### macOS")
            st.write("""
            **Versiones recientes:**
            - macOS Sonoma (2023)
            - macOS Ventura (2022)
            - macOS Monterey (2021)
            
            **Caracter√≠sticas:**
            - Integraci√≥n con Apple
            - Dise√±o elegante
            - Basado en Unix
            - Ecosistema cerrado
            """)

elif seccion == "üìä Estad√≠sticas":
    st.markdown("## üìà Estad√≠sticas de Uso")
    
    # Datos de uso de SO
    uso_so = pd.DataFrame({
        'Sistema Operativo': ['Windows', 'macOS', 'Linux', 'Chrome OS', 'Otros'],
        'Porcentaje': [73.48, 15.42, 2.88, 2.45, 5.77]
    })
    
    # Gr√°fico de pastel
    fig1 = px.pie(uso_so, values='Porcentaje', names='Sistema Operativo', 
                  title='Cuota de Mercado de Sistemas Operativos (Desktop 2024)')
    st.plotly_chart(fig1, use_container_width=True)
    
    # Tendencias hist√≥ricas
    a√±os = list(range(2010, 2025))
    windows_trend = [85, 84, 82, 80, 78, 77, 76, 75, 74, 73, 73, 73, 73, 73, 73]
    linux_trend = [1.5, 1.6, 1.8, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 2.8, 2.9, 2.9]
    macos_trend = [8, 8.5, 9, 10, 11, 12, 13, 14, 14.5, 15, 15.2, 15.3, 15.4, 15.4, 15.4]
    
    fig2 = go.Figure()
    fig2.add_trace(go.Scatter(x=a√±os, y=windows_trend, mode='lines+markers', name='Windows'))
    fig2.add_trace(go.Scatter(x=a√±os, y=linux_trend, mode='lines+markers', name='Linux'))
    fig2.add_trace(go.Scatter(x=a√±os, y=macos_trend, mode='lines+markers', name='macOS'))
    
    fig2.update_layout(
        title='Tendencia de Uso de SO (2010-2024)',
        xaxis_title='A√±o',
        yaxis_title='Porcentaje de Uso (%)',
        hovermode='x unified'
    )
    
    st.plotly_chart(fig2, use_container_width=True)
    
    # Estad√≠sticas adicionales
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown("### üåç Distribuciones Linux m√°s populares")
        distros = pd.DataFrame({
            'Distribuci√≥n': ['Ubuntu', 'Debian', 'Mint', 'Manjaro', 'Fedora'],
            'Popularidad': [33.9, 16.2, 11.8, 8.4, 6.5]
        })
        fig3 = px.bar(distros, x='Distribuci√≥n', y='Popularidad', 
                     title='Top 5 Distribuciones Linux (%)')
        st.plotly_chart(fig3, use_container_width=True)
        
    with col2:
        st.markdown("### üíº SO en Servidores")
        servidores = pd.DataFrame({
            'Sistema': ['Linux', 'Windows Server', 'Unix', 'Otros'],
            'Porcentaje': [68.2, 28.3, 2.1, 1.4]
        })
        fig4 = px.bar(servidores, x='Sistema', y='Porcentaje',
                     title='SO en Servidores Web (%)')
        st.plotly_chart(fig4, use_container_width=True)

elif seccion == "üéØ Quiz Interactivo":
    st.markdown("## üéÆ Quiz: ¬øCu√°nto sabes sobre SO Libre y Privativo?")
    
    score = 0
    total_preguntas = 5
    
    st.write("Responde las siguientes preguntas para evaluar tus conocimientos:")
    
    # Pregunta 1
    st.markdown("### Pregunta 1")
    p1 = st.radio(
        "¬øCu√°l de las siguientes es una caracter√≠stica fundamental del software libre?",
        ["Es siempre gratuito", "Permite acceso al c√≥digo fuente", "Solo funciona en Linux", "No tiene licencia"],
        key="p1"
    )
    if p1 == "Permite acceso al c√≥digo fuente":
        score += 1
        
    # Pregunta 2
    st.markdown("### Pregunta 2")
    p2 = st.radio(
        "¬øQui√©n inici√≥ el movimiento del software libre?",
        ["Linus Torvalds", "Bill Gates", "Richard Stallman", "Steve Jobs"],
        key="p2"
    )
    if p2 == "Richard Stallman":
        score += 1
        
    # Pregunta 3
    st.markdown("### Pregunta 3")
    p3 = st.radio(
        "¬øEn qu√© a√±o se lanz√≥ el kernel Linux?",
        ["1983", "1991", "1995", "2000"],
        key="p3"
    )
    if p3 == "1991":
        score += 1
        
    # Pregunta 4
    st.markdown("### Pregunta 4")
    p4 = st.multiselect(
        "¬øCu√°les de los siguientes son sistemas operativos libres? (Selecciona todos los que apliquen)",
        ["Ubuntu", "Windows", "Fedora", "macOS", "Debian", "Android"],
        key="p4"
    )
    respuestas_correctas = ["Ubuntu", "Fedora", "Debian", "Android"]
    if set(p4) == set(respuestas_correctas):
        score += 1
        
    # Pregunta 5
    st.markdown("### Pregunta 5")
    p5 = st.radio(
        "¬øCu√°l es la principal diferencia entre software libre y open source?",
        [
            "No hay diferencia, son lo mismo",
            "El software libre se enfoca en la libertad, open source en la metodolog√≠a de desarrollo",
            "Open source es siempre gratuito, software libre no",
            "Software libre es para Linux, open source para todos los SO"
        ],
        key="p5"
    )
    if p5 == "El software libre se enfoca en la libertad, open source en la metodolog√≠a de desarrollo":
        score += 1
    
    # Bot√≥n para mostrar resultados
    if st.button("üìä Ver Resultados", type="primary"):
        st.markdown("---")
        st.markdown(f"### üèÜ Tu puntuaci√≥n: {score}/{total_preguntas}")
        
        porcentaje = (score/total_preguntas) * 100
        
        if porcentaje == 100:
            st.success("¬°Excelente! Eres un experto en SO libre y privativo üåü")
            st.balloons()
        elif porcentaje >= 80:
            st.success("¬°Muy bien! Tienes buenos conocimientos sobre el tema üëè")
        elif porcentaje >= 60:
            st.info("Bien, pero puedes mejorar. Revisa las secciones anteriores üìö")
        else:
            st.warning("Necesitas estudiar m√°s sobre el tema. Te recomendamos revisar toda la informaci√≥n üí™")
        
        # Respuestas correctas
        with st.expander("Ver respuestas correctas"):
            st.write("""
            1. **Permite acceso al c√≥digo fuente** - Esta es la caracter√≠stica fundamental que define al software libre
            2. **Richard Stallman** - Fundador del movimiento del software libre y del proyecto GNU
            3. **1991** - Linus Torvalds liber√≥ la primera versi√≥n del kernel Linux
            4. **Ubuntu, Fedora, Debian, Android** - Todos estos son sistemas operativos basados en software libre
            5. **El software libre se enfoca en la libertad, open source en la metodolog√≠a de desarrollo** - Aunque comparten c√≥digo, tienen filosof√≠as diferentes
            """)

# Footer
st.markdown("---")
st.markdown("""
<div style='text-align: center; color: #666;'>
    <p>Desarrollado por Grupo #1 | SO Libre y Privativo: Historia y Ejemplos</p>
    <p>¬© 2024 - Material educativo</p>
</div>
""", unsafe_allow_html=True)
